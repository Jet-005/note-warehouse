## 1. 基本概念
- **定义**（P22）
  - 计算机网络是自治、互连的计算机集合
	  - 自洽：是指互连的计算机系统彼此独立，不存在主从或者控制与被控制的关系
	  - 互连：是指利用通信链路连接相互独立的计算机系统
  - 最大网络：Internet/因特网
    - ISP层次结构：本地ISP、区域ISP、国家级ISP
    - 核心设备：路由器、交换机
    - ISP网络由分组交换设备构成，最典型的是路由器和交换机
- **协议概念**（P23）
  - 定义：为进行网络中的数据交换而建立的规则、标准或约定即网络协议，简称协议。协议是网络通信实体之间在数据交换过程中需要遵循的规则或约定，是计算机网络有序运行的重要保证
  - 网络协议的产生：
	  - 计算机网络中的数据交换必须遵守事先约定好的规则
	  - 这些规则明确规定了所交换的数据的格式以及有关的同步问题
	  - 网络协议必须考虑如何对付各种异常情况的出现
  - **三要素**
    - 语法：定义实体之间交换信息的格式与结构，或者定义实体（比如硬件设备）之间传输信号的电平等
    - 语义：定义实体之间交换的信息中需要发送 (或包含) 哪些控制信息，这些信息的具体含义，以及针对不同含义的控制信息，接收信息端应如何响应。另外，有的协议还需要进行差错检测，这类协议通常会在协议信息中附加差错编码等控制信息。语义还需要定义彼此采用何种差错编码，以及采取何种差错处理机制等。
    - %%需要发出何种控制信息，完成何种动作以及做出何种响应%%
    - 时序：也称为同步，定义实体之间交换信息的顺序以及如何匹配或适应彼此的速度
- **网络功能**
  - 资源共享
    - 硬件资源共享：云计算和云存储是典型的硬件共享的实例
    - 软件资源共享：SaaS是目前互联网环境下软件共享的典型形式
    - 信息资源共享：通过个人主页发布个人信息、通过微信发朋友圈等。计算机网络所支持的信息交换就是典型的信息共享
- **网络分类**
  - 按覆盖范围
    - 个域网（PAN）：近几年随着穿戴设备、便携式移动设备的快速发展而提出的网络类型。通常是由个人设备通过无线通信技术构成小范围的网络，实现个人设备间的数据传输，比如通过**蓝牙技术**实现个人设备的互连等。个域网通常覆盖范围在 **1~10m**。
    - 局域网（LAN）：局域网通常部署在办公室、办公楼、厂区、校园等局部区域内，采用高速有线或无线链路连接主机，实现局部范围内高速数据传输。局域网通常覆盖范围在 **10m~1 km**
    - 城域网（MAN）：指覆盖一个城市范围的网络，覆盖范围通常在**5-50km**
    - 广域网（WAN）：广域网覆盖范围在**几十到几千千米**，通常跨越更大的地理空间，可以实现异地城域网或局域网的互连。

  - 按拓扑结构：网络拓扑是指网络中的主机、网络设备间的物理连接关系与布局。
	  - 星型：星型拓扑结构网络包含一个中央节点，网络中的主机通过点对点通信链路与中央结点连接，中央结点通常是**集线器、交换机**等设备
		  - ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250805103244243.png)
		  - 优点：易于监控与管理，故障诊断与隔离容易
		  - 缺点：中央结点是网络的瓶颈，一旦故障，全网瘫痪，网络规模受限于中央结点的端口数量
	  - 总线型：采用一条广播信道作为公共传输介质，称为总线，所有结点均与总线连接，结点间的通信均通过共享的总线进行
		  - ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250805103505151.png)
		  - 如果同时有两个或两个以上的结点同时向共享信道中发送数据，就会产生干扰，会导致任何一个结点的数据发送失败，这一现象称为冲突
		  - 优点：结构简单，所需电缆数量少，易于扩展
		  - 缺点：通信范围受限，故障诊断与隔离较困难，容易产生冲突
	  - 环型：利用通信链路将所有结点连接成一个闭合的环，环中的数据传输通常是单向（也可以是双向）传输，多用于早期的局域网、园区网和城域网中
		  - ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250805112042613.png)
		  - 优点：所需电缆长度短，可以使用光纤，易于避免冲突
		  - 缺点：某结点的故障容易引起全网瘫痪，新结点的加入或撤出过程比较麻烦，存在等待时间问题
	  - 网状型：网络中的结点通过多条链路与不同的结点直接连接，如果网状拓扑结构网络的任一结点与其余所有结点均有直接链路连接，则称为完全网状拓扑网络。多见于广域网，核心网络等
		  - ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250805112339611.png)
		  - 优点：网络可靠性高，一条或多条链路故障时，网络仍然可联通
		  - 缺点：网络结构复杂，造价成本高，选路协议复杂
	  - 树型：树形拓扑结构网络可以看作是总线型拓扑或星形拓扑网络的扩展，比较多见的是通过级联星形拓扑结构网络中的中央结点构建树形拓扑结构网络
		  - ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250805114601234.png)
		  - 目前，很多局域网采用这种拓扑结构
		  - 优点：易于扩展，故障隔离容易
		  - 缺点：对根结点的可靠性要求高，一旦根结点故障，则可能导致网络大范围无法通信
	  - 混合拓扑结构：由两种以上简单拓扑结构网络混合连接而成的网络，绝大多数实际网络的拓扑都属于混合拓扑结构，比如 Intemet。
		  - ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250805114624056.png)

		  - 优点：易于扩展，可以构建不同规模网网络，并可根据需要优选网络结构
		  - 缺点：网络结构复杂，管理与维护复杂
  - 按交换方式：网络通过彼此互连的结点间的数据转接，实现将数据从发送结点送达目的结点的过程和技术
    - 电路交换
    - 报文交换
    - 分组交换
  - 按用户属性
    - 公用网（公共基础设施）
    - 私有网（军事、银行等专用网络）

## 2. 网络结构
- **网络边缘**
  - 普通网络用户
  - 网站服务器
- **接入网络**
  - 电话拨号接入：利用电话网络，通过调制解调器 (modem) 将数字信号调制到模拟电话线路，通过电话网络的模拟语音信号作为载波传送到远端，再利用调制解调器将数字信号从模拟信号解调出来
	  - 优点：电话网络覆盖广泛
	  - 缺点：接入链路带宽有限，最大带宽通常为 **56kbit/s**
  - ADSL接入（“非对称”）：也是利用现有的电话网络的用户线路实现的接入网络，ADSL 是目前家庭用户接入网络中比较常见的一种接入方式
	  - ADSL 基于**频分多路复用 (FDM) 技术**实现**电话语音通信与数字通信** (即网络数据传输) 共享一条用户线路，在进行网络通信的同时可以进行电话语音通信，这与传统的拨号接入存在很大差异
	  - 当用户线路长度在**3~5km**范围时，典型的上行带宽为**512kbit/s~1Mbit/s,** 下行带宽为 **1~8Mbit/s**。当用户线路长度在**1.3km**以内时，可以实现更高速率的 VDSL, 其典型的下行带宽可以达到 **55Mbit/s**, 上行带宽可以达到 **19.2Mbit/s**。
	  - 主要用于家庭用户接入网络，一些小型商业用户也选择这种接入方式，比如小型商业门店等。
  - HFC接入（“非对称”）：也称为电缆调制解调制器 (**cablemodem**) 接入，是利用有线电视网络实现网络接入的技术。
	  - HFC 接入是共享式接入，即连接到同一段同轴电缆上 (比如同一栋住宅楼内) 的用户共享上行和下行带宽。因为是共享的，所以当用户数较多时，每个用户可以分到的网速就少
	  - 当用户数量较大时，HFC 接入没有「ADSL 接入速率快，因为ADSL 是独享式接入。
  - 局域网接入：企业、学校等机构会在组织范围内建设局域网，连接所有需要接入外部网络 (如Internet) 的主机，然后通过企业网络或校园网的边缘路由器连接网络核心。
	  - 典型的局域网技术是**以太网、Wi-Fi** 等
	  - 现在随着**光纤到户 (FibertotheHome,FTTH1)** 的推广与普及，越来越多住宅小区的家庭用户也采用局域网技术实现网络接入。
  - 移动接入：主要利用移动通信网络，如 3G/4G/5G 网络，实现智能手机、移动终端等设备的网络接入
- **网络核心**
  - ISP（互联网服务提供商）
  - 功能：数据中继与转发（数据交换）
  - ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250806093103299.png)


## 3. 数据交换技术
- **基本概念**
	- 交换设备具有多通信端口，可以同时连接多个通信结点 (即主机或交换设备)，实现通信端口间物理或逻辑上的动态、并行通信。
	- 为了连接更大范围、更多数量的主机，可以将许多交换设备互连，构成一个数据中继与转发的 "**中间网络**", 然后再将主机连接到距离较近的交换设备上，主机之间的数据传输通过 "中间网络" 实现中继与转发。这个中间网络不需要关心所传输数据的内容，而只是为这些数据从一个结点到另一个结点直到达目的结点提供数据中继与交换的功能，因此，称之为数据交换网络
	- 数据交换是实现在大规模网络核心上进行数据传输的技术基础
	- 交换设备：交换结点（即交换设备）组成通信子网
	- ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250806103827248.png)

- **电路交换**
	- 是在通信双方之间建立一条临时专用线路的过程
	- 特点：数据传输前需要建立一条端到端的通路，又称为“面向连接的”数据交换
	- 优点：实时性高，时延和时延抖动都较小
	- 缺点：对于突发性数据传输，信道利用率低，且传输速率单一
	- 主要适用于语音和视频这类实时性抢的业务
	- 典型应用：电话通信
	- 过程三阶段
	    1. 电路建立
	    2. 数据传输
	    3. 电路拆除
- **报文交换**
	  - 传输单位：报文（长度可变的数据块），报文就是站点一次性要发送的数据块
	  - 特点
		  1. 以报文为单位进行交换
		  2. 不需要在两个站之间建立专用通路
		  3. 传送方式采用“<font color="#ff0000">存储一转发</font>”交换方式
	- ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250806105002044.png)

- **分组交换**
	- 将一个报文分成若干个分组，逐个发送分组
		- 分组长度有一个上限，典型的最大长度是数千位字节
	- 传输单位：分组（定长数据块）
	- 特点：高效、灵活、可靠
		- 分组交换是目前计算机网络广泛采用的技术
		- 在发送端，先把较长的报文划分成较短的、固定长度的数据段
	- 优点：
		1. 交换设备存储容量要求低。分组交换将大报文拆分为较短的分组送进行传输。理论上讲，分组交换设备只要能缓存一个小分组，网络就可以工作。因此，分组交换可以大大降低对网络交换结点的存储容量的要求。
		2. 交换速度快。分组交换设备由于只需要：缓存一定数量的较短的分组，因此可以利用主存储器进行存储 - 转发处理，不需访问外存，处理转发速度加快。另外，在分组交换网络中，多个分组可以在网络中的不同链路上进行并发传送，大大提高传输效率和线路利用率，大幅缩短整个报文通过网络的时间。
		3. 可靠传输效率高。对于分组交换网络，**一个分组出现差错，只需重传出错的分组**，并不需要重传所有由同一报文拆分出来的分组。报文长度通常远大于分组长度，在差错概率相同的条件下，报文交换网络中的一个报文出现差错的概率，大于分组交换网络中一个分组出现差错的概率，而重传一个报文的代价要远远大于重传一个分组的代价。因此，在存在差错可能的情况下，分组交换实现可靠传输的效圣率要高于报文交换。
		4. 更加公平。对于分组交换，如果分组大小相同，那么大报文将拆分分出更多的分组，小报文将拆分出较少的分组，不同报文的分组在交换结点上可能交替排队人，每个分组通过网络的时间相当，总体上，小报文将用较短时间通过网络到达目的。因此，分组交换更加公平。
	- ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250806105711318.png)
	- 关键设备：分组交换机
- **三种交换技术比较**
	- ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250806105818675.png)

## 4. 网络性能
- **性能指标**
	  - 带宽：单位时间内传输的最大数据量
	  - 时延：数据从源到目的地的总时间
	    - 发送时延、传播时延、处理时延、排队时延
	  - 吞吐量：实际传输速率
	  - 丢包率：丢失分组占总发送分组的比例
	  - 往返时间（RTT）
- **速率与带宽**
	- 速率
		- 速率基本单位bit/s (比特每秒)
		- 进制转换：K/M/G/T
		- 时间单位：毫秒ms、秒s
		- 比特bit和字节Byte的关系，1Byte=8bit
	- 带宽：有两层含义
		1. 频带宽度，HZ
		2. 信道的数据传输能力，bit/s(比特每秒)
- **<font color="#ff0000" style="font-weight: bold">网络时延</font>
	- 时延是指数据从网络中的一个结点 (主机或交换设备等) 到达另一结点所需要的时间。
	- **处理时延**：每个分组到达交换结点(比如路由器)时，交换设备通常可能需要验证分组是否有差错，根据分组携带的信息(比如目的地址)检索转发表，确定如何转发该分组,还有可能修改分组的部分控制信息等。针对分组进行这些操作所消耗的时间总和，构成了结点处理时延，记为**d3**。结点处理时延通常很小，并且对不同分组的结点处理时延变化也非常小，因此，在讨论网络总时间延迟时常常被忽略。
	- **排队时延**：分组在缓存中排队等待的时间就是排队时延，记为 dq
	- **传输时延：** 当一个分组在**输出链路发送**时，从发送第一位开始，到发送完最后一位为止，所用的时间，称为**传输时延，也称为发送时延**，记为 dt。假设分组长度为 Lbit，链路带宽 (即速率)  为 Rbit/s，则分组的传输时延为**dt = L/R**。显然，分组的传输时延**取决于分组长度与链路带宽**。类似地，不在报文交换网络中，也可以计算在某链路上传输一个报文的传输时延，即 MR, 其中 M (bit) 为报文长度。
		- dt = L / R，L是传输总量，R是链路带宽
	- **传播时延：** 信号从发送端发送出来，经过一定距离的物理链路到达接收端所需要的时间，称为传播时延，记为 dp- 若物理链路长度为 D (m), 信号传播速度为 V (m/s)  传播时延为**d = D/V**
		- dp = D / V，D是传播距离，V是传播速度
- **时延带宽积**
	- G = dp× R，单位bit
	- 时延带宽积的物理意义在于：如果将物理链路看作一个传输数据的管道的话，时延带宽积表示一段链路可以容纳的数据位数，也称为以位为单位的链路长度
- **丢包率**
	- 当网络拥塞特别严重时，新到达的分组甚至已无缓存空间暂存该分组，此时交换结点会丢弃分组，就会发生 "**丢包**" 现象
	- 丢包率常被用于评价和衡量网络性能的指标，在很大程度上可以反映网络的拥塞程度，因为引发网络丢包的主要因素是网络拥塞。
	- ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250808164659612.png)
- **吞吐量**
	- 吞吐量 (throughput) 表示在单位时间内源主机通过网络向目的主机实际送达的数据量，单位为 bit/s 或 B/s (字节每秒)，记为 Thr
	- 吞吐量经常用用于**度量网络的实际数据传送(通过)能力**，即网络实际可以达到的源主机到目的主机的数据传送速率。吞吐量受**网络链路带宽、网络连接复杂性、网络协议、网络拥塞程度**等因素影响。
	- Thr=min(R1​,R2​,⋯,Ri​,⋯,RN−1​,RN​) 表示 S 到 C 的最大吞吐量（Thr ），由路径上所有链路速率里的最小值决定 。因为不管其他链路多快，数据传输到瓶颈链路时，速度得 “迁就” 它，所以整体最大吞吐量就是瓶颈链路的速率 。
	- ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250808165229446.png)



## 5. 体系结构
- **计算机网络的复杂性、异质性**
	- 不同的通信介质——有线、无线
	- 不同种类的设备——主机、路由器、交换机
	- 不同的操作系统——Unix、Windows
	- 不同的软/硬件、接口和通信约定（协议）
	- 不同的应用环境——固定、移动
	- 不同种类业务——分时、交互、实时
- **计算机网络采用分层设计、对等通信、虚通信原则**
	- 对等层实体之间实现的是虚拟的逻辑通信
	- 下层向上层提供服务
	- 上层依赖下层提供的服务来与其它主机上的对等层通信
	- 实际通信在最底层完成
- **OSI七层模型**：简称OSI/RM，是由国际标准化组织（ISO）制定的标准化开放式计算机网络层次结构模型
	- **1~3** 层主要是完成**数据交换和数据传输**，称之为**网络低层**；**5~7** 层主要是**完成信息处理服务**的功能，称之为**网络高层**；低层与高层之间由第 4 层衔接。
	- ![image.png](https://obsi-jet.oss-cn-beijing.aliyuncs.com/img/20250811084124579.png)
	- 物理层：在物理线路上传输原始的二进制数据
		- 物理层要实现信号编码功能
		- 另一项主要任务就是规定数据终端设备(DTE) 与数据通信设备 (DCE) 之间接口的相关特性，主要包括**机械、电气、功能和规程** 4个方面的特性。
		- 典型的的物理层协议包括 RS-232c、RS449 以及其他网络通信标准中有关物理层的协议等
	- 数据链路层：在有差错的物理线路上提供无差错的数据传输（Frame）
		- 为了能实现有效的差错控制，就采用了一种以"**帧**" 为单位的数据块传输方式。要采用帧格式传输，就必须有相应的帧同步技术，这就是数据链路层的 "**成帧**"(也称为 "**帧同步**") 功能，包括定义帧的格式、类型、成帧的方法等。
		- 另一个重要功能是寻址，即用来确保每一帧都能准确地传送到正确的接收方，接收方也应该知道发送方的地址
		- 采用广播信道的数据通信网络的 **ALOHA 协议、CSMA/CD** 等
	- 网络层：控制通信子网提供源点到目的点的数据传送（Packet）
		- 主要功能是数据转发与路由
		- 也要具备寻址功能，确保分组可以被正确传输到目的主机，比如 Internet 网络中的 IP 地址。
	- 运输层：为用户提供端到端的数据传送服务
		- 传输层是第一个端到端的层次，也是进程-进程的层次
		- 主要包括复用/分解(区分发送和接收主机上的进程)、端到端的可靠数据传输、连接控制、流量控制和拥塞控制机制等。
	- 会话层：为用户提供会话控制服务（安全认证）
		- 主要功能：在建立会话时核实双方身份是否有权参加会话；确定双方支付通信费用；双方在各种选择功能方面 (如全双工还是半双工通信)取得一致；在会话建立以后， 需要对进程间的对话进行管理与控制
		- 在实际的网络中，会话层的功能已经被应用层所覆盖，很少单独存在。
	- 表示层：为用户提供数据转换和表示服务
		- 主要用于**处理应用实体间交换数据的语法**，其目的是**解决格式和数据表示的差别**，从而为应用层提供一个一致的数据格式，使字符、格式等有差异的设备之间相互通信
		- 表示层还可以实现**文本压缩 / 解压缩、数据加密 / 解密、字符编码的转换**等功能
		- 在某些实际数据通信网络中是由应用层来实现的，，而且表示层不独立存在
	- 应用层：为用户提供网络应用服务
		- 应用层与提供给用户的网络服务相关，这些服务非常丰富，包括文件传送、电子邮件、P2P 应用等。应用层为用户提供了一个使用网络应用的 "接口"。
- **OSI模型的术语**
	- 数据单元：在层的实体之间传送的比特组称为数据单元
		- 在对等层之间传送数据单元是按照本层协议进行的，称为协议数据单元（PDU）
		- PDU-协议数据单元，SDU-服务数据单元，PCI-协议控制信息（通常作为PDU的首部）
	- 服务访问点：
		- 相邻层间的服务是通过直接口面上的服务访问点（SAP）
		- 每个SAP都有一个唯一的地址号码
	- 服务原语
		- 请求：用户实体请求服务做某种工作
		- 指示：用户实体被告知某件事发生
		- 响应：用户实体表示对某件事的响应
		- 证实：用户实体收到关于它的请求的回复
	- 面向连接的服务和无连接的服务
		- 面向连接以**电话系统**最为典型
		- 无连接的服务又称为数据报服务，**没有建立和拆除链路**的过程
- **TCP/IP四层模型**
	- 包括4层
		- 应用层  
		    - www服务、文件传输、电子邮件等  
		    - 每个应用层协议一般都会使用到两个传输层协议之一进行数据传输：面向连接的传输控制协议TCP和无连接的用户数据报协议UDP
		- 传输层（TCP/UDP）
		    - 传输层的协议负责把这些数据传输到接收方主机上对等的应用层程序  
		    - 传输层协议可以解决（如果需要）诸如端到端可靠性，保证数据按照正确的顺序到达等问题  
		    - 负责在网络层和应用层之间传递消息，丝毫不会涉及消息如何在网络中传输  
		    - 主要包括面向连接、提供可靠数据流传输的传输控制协议TCP和无连接不提供可靠数据传输的用户数据报协议UDP
		- 网络互联层（IP层）：是整个TCP/IP参考模型的核心，主要解决把数据分组发往目的网络或主机的问题
			- **核心协议是IP，负责定义分组的格式和传输**。IP是无连接不可靠网络协议，可能存在分组丢失现象 
			- 还包括**互联网控制报文协议ICMP、互联网多播组管理协议IGMP以及路由协议，如BGP、OSPF和RIP**等
		- 网络接口层
			- 由于这一层未被定义，所以其具体实现方法将随着网络类型的不同而不同
			- 这一层对应OSI参考模型中的数据链路层和物理层
	- 已成主流
	- 在局域网中最早出现在Unix系统中，现在几乎所有的厂商和操作系统都开始支持它。同时也是Internet的基础协议
- **五层协议体系结构**（课本P46）
	- 物理层、数据链路层、网络层、传输层和应用层
	- 这是近年来，在描述计算机网络中最常用、最接近实际网络的参考模型
- **发展历史**
	- 1967年第一个分级换计算机网络ARPAnet
	- 1995年万维网www诞生
	- 2000年开始，互联网爆发，进入"互联网+"时代