
## 一、网络层服务
- 主要功能
  - 转发：将分组从路由器的输入端口转发到输出端口
  - 路由选择：确定分组从源到目的的路径
- 路由器转发表
  - 交换或收集路由信息
  - 计算路由
  - 存储路由信息

## 二、虚电路与数据报
- 数据报网络
  - 无连接服务
  - 需要路由选择
  - 因特网属于数据报网络
  - 接收方需对分组重新排序
- 虚电路网络
  - 面向连接的分组服务
  - 逻辑连接（虚电路号VCID）
  - 三个要素：虚电路号、路由表、网络状态
  - 两种类型：永久型虚电路、交换型虚电路
- 虚电路与数据报的区别
  - 连接方式：面向连接vs无连接
  - 分组转发：基于VCIDvs基于目的地址
  - 可靠性：由网络层保证vs由运输层保证

## 三、网络互连与设备
- 异构网络互连
  - 概念：不同类型网络的连接
  - 策略：协议转换、构建虚拟互联网络
  - IP网络、Internet均为虚拟互联网
- 网络互连设备
  - 协议转换的交换机和网桥
  - 多协议路由器
  - 应用网关
  - Internet的网络互连设备：IP路由器
- 隧道技术：异构网络数据报传输的典型技术
- 路由器功能结构
  - 输入端口：接收链路层帧并提取数据报
  - 交换结构：三种类型（内存、总线、网络）
  - 输出端口：封装数据报为链路层帧
  - 路由处理器：路由计算与转发表维护

## 四、网络层拥塞控制
- 网络拥塞
  - 概念：网络中分组数量超过网络处理能力
  - 原因：
    1. 网络资源不足
    2. 流量分布不均
    3. 路由算法不当
    4. 突发流量
- 拥塞控制与流量控制的区别
  - 拥塞控制：全局控制，解决网络整体拥塞
  - 流量控制：端到端控制，解决发送方与接收方速率匹配
- 拥塞控制措施
  - 拥塞预防
    - 流量感知路由：链路权值动态调整
    - 准入控制：虚电路网络中审核连接建立
  - 拥塞消除
    - 流量调节：抑制分组+背压
    - 负载脱落：选择性丢弃分组（文件传输丢新分组，视频流丢旧分组）

## 五、Internet网络层
- IPv4协议
  - 数据报格式（固定首部20字节）
    - 首部长度：4位，单位4字节
    - 总长度：16位，包含首部和数据
    - 标识：16位，标识数据报
    - 标志：3位（DF：不分片，MF：更多分片）
    - 片偏移：13位，单位8字节
  - IP分片计算
    - MTU（最大传输单元）限制
    - 分片示例：总长度3800字节，MTU=1500字节时分为3片
- IP地址
  - 分类：A、B、C、D、E类
  - 子网划分：子网掩码、子网网络地址计算
  - CIDR（无类别域间路由）：路由聚合
- 动态主机配置协议（DHCP）：自动分配IP地址
- 网络地址转换（NAT）：私有IP与公有IP转换
- ICMP（网际控制报文协议）：差错报告与网络探测
- IPv6：128位地址，简化首部，自动配置，安全性

## 六、路由算法与协议
- 路由算法分类
  - 静态路由vs动态路由
  - 全局路由（链路状态）vs分散路由（距离向量）
- 链路状态路由选择算法
  - 步骤：发现邻居、测量链路代价、广播链路状态、计算路由
  - Dijkstra算法
- 距离向量路由选择算法
  - Bellman-Ford方程
  - 路由毒化与水平分割
- 层次化路由选择：自治系统（AS）
- Internet路由选择协议
  - RIP（路由信息协议）：距离向量，跳数限制15
  - OSPF（开放最短路径优先）：链路状态，使用Dijkstra
  - BGP（边界网关协议）：路径向量，AS间路由