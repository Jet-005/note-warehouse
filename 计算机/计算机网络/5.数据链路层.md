

## 一、数据链路层服务
- 基本概念
  - 数据链路层位置：OSI参考模型第二层，介于物理层与网络层之间
  - 帧：数据链路层传输单位，将比特流组织成帧进行差错控制
- 主要服务功能
  - 组帧：将网络层数据报封装成帧
  - 链路接入：控制对传输介质的访问
  - 可靠交付：确保帧无差错地传输
  - 差错控制：检测并纠正传输中的差错

## 二、差错控制
- 差错产生原因
  - 噪声类型：随机噪声、冲击噪声
  - 突发长度：连续出错的比特数
- 差错控制基本方式
  - 检错重发：检测到错误后请求重发
  - 前向纠错：接收方直接纠正错误（适用于单工链路或实时性要求高的场景）
  - 反馈校验：接收方将数据回传给发送方比对
  - 检错丢弃：仅检测错误不纠正，直接丢弃出错帧
- 差错编码原理
  - 汉明距离：衡量编码检错/纠错能力的指标
  - 检错能力：能检测出的错误位数
  - 纠错能力：能纠正的错误位数
- 典型差错编码
  - 奇偶校验码
    - 奇校验：使码字中"1"的个数为奇数
    - 偶校验：使码字中"1"的个数为偶数
    - 特点：仅能检测奇数位错误，漏检率高
  - 汉明码
    - 功能：实现单个比特纠错
    - 冗余位计算：r≥log2(n+r+1)，n为信息位长度
  - 循环冗余校验（CRC）
    - 多项式编码：将比特串视为多项式系数
    - 计算步骤：
      1. 信息码左移r位（r为生成多项式最高幂次）
      2. 除以生成多项式G(x)，得到余数R(x)
      3. CRC码 = 信息码 + 余数R(x)
    - 应用：数据链路层广泛使用，漏检率低

## 三、多路访问控制协议
- 协议分类
  - 信道划分MAC协议：通过多路复用技术共享信道
  - 随机访问MAC协议：按需竞争信道访问权
  - 受控接入MAC协议：通过集中控制或令牌方式分配信道
- 信道划分MAC协议
  - 频分多路复用（FDMA）：将频段划分为多个子信道
  - 时分多路复用（TDMA）：
    - 同步TDMA：固定时间片分配
    - 异步TDMA：动态时间片分配（如我国3G标准）
  - 波分多路复用（WDMA）：光域的频分复用
  - 码分多路复用（CDMA）：使用正交码组区分不同用户（3G主流技术）
- 随机访问MAC协议
  - ALOHA协议
    - 纯ALOHA：随时发送，冲突后随机重发，信道利用率18.4%
    - 时隙ALOHA：按时间片发送，信道利用率36.8%
  - CSMA协议（载波侦听多路访问）
    - 非坚持CSMA：空闲则发送，忙则随机延迟
    - 1-坚持CSMA：空闲则立即发送，忙则持续监听
    - p-坚持CSMA：空闲则以概率p发送，忙则延迟
  - CSMA/CD协议（带冲突检测的CSMA）
    - 核心机制：边发送边监听，冲突立即停止并发送干扰信号
    - 冲突检测时间：≤2τ（τ为信号传播延迟）
    - 退避算法：二进制指数退避，随机等待后重发
    - 应用：以太网的核心协议
- 受控接入MAC协议
  - 集中控制：由中心节点分配信道（如轮询、预约）
  - 令牌传递：通过令牌环控制发送权（如令牌环网）

## 四、局域网
- 数据链路层寻址
  - MAC地址：48位硬件地址，全球唯一
  - ARP协议：将IP地址解析为MAC地址
    - 工作过程：广播请求→单播响应→缓存结果
- 以太网
  - 帧结构：前导码、目的MAC、源MAC、类型字段、数据、CRC
  - 物理层标准：10BASE-T、100BASE-TX、1000BASE-T等
  - 特点：采用CSMA/CD协议，总线型拓扑
- 交换机
  - 工作原理：基于MAC地址表转发帧
  - 转发方式：存储转发、直通转发、无碎片转发
  - 功能：隔离冲突域、提高网络带宽
- 虚拟局域网（VLAN）
  - 概念：通过逻辑划分将物理局域网隔离为多个广播域
  - 实现方式：基于端口、MAC地址、IP地址
  - 优点：提高安全性、简化网络管理

## 五、点对点链路协议
- PPP协议（点对点协议）
  - 组成：链路控制协议（LCP）、网络控制协议（NCP）
  - 帧格式：标志字段（0x7E）、地址字段、控制字段、协议字段、数据、FCS
  - 特点：支持多种网络层协议、差错检测、连接控制
- HDLC协议（高级数据链路控制协议）
  - 类型：面向比特的同步协议
  - 帧格式：标志字段、地址字段、控制字段、信息字段、FCS
  - 工作模式：正常响应模式（NRM）、异步响应模式（ARM）、异步平衡模式（ABM）